CREATE TABLE USER(
    USER_ID INT NOT NULL,
    USERNAME VARCHAR(25) NOT NULL,
    USER_PASSWORD VARCHAR(32),
    LOG_FILE VARCHAR(32),
    PRIMARY KEY(USER_ID)
);

CREATE TABLE PROJECT(
    PROJECT_ID INT NOT NULL,
    PROJECT_NAME VARCHAR(25),
    USER_ID INT,
    PRIMARY KEY(PROJECT_ID),
    FOREIGN KEY(USER_ID) REFERENCES USER(USER_ID)
);

CREATE TABLE ROOM(
    ROOM_NAME VARCHAR(25) NOT NULL,
    ORIENTATION INT,
    ROOM_AREA INT,
    PRIMARY KEY(ROOM_NAME)
);

CREATE TABLE DEVICE(
    DEVICE_ID INT NOT NULL,
    DEVICE_NAME VARCHAR
    LAST_CONNECTION DATE,
    ROOM_NAME VARCHAR(25) NOT NULL,
    PRIMARY KEY(DEVICE_ID),
    FOREIGN KEY(ROOM_NAME) REFERENCES ROOM(ROOM_NAME)
);

CREATE TABLE VARIABLES(
    VARIABLE_ID INT NOT NULL,
    DATA FLOAT,
    DATA_TIME DATE,
    DEVICE_ID INT
    PRIMARY KEY(VARIABLE_ID),
    FOREIGN KEY(DEVICE_ID) REFERENCES DEVICE(DEVICE_ID)
);

CREATE TABLE REACTS_WITH(
    USER_ID INT NOT NULL,
    DEVICE_ID INT NOT NULL,
    TIME_OF_EVENT DATE
    PRIMARY KEY(USER_ID,DEVICE_ID),
    FOREIGN KEY(USER_ID) REFERENCES USER(USER_ID),
    FOREIGN KEY(DEVICE_ID) REFERENCES USER(DEVICE_ID),
);

CREATE TABLE BELONGS(
    PROJECT_ID INT NOT NULL,
    DEVICE_ID INT NOT NULL,
    PRIMARY KEY(PROJECT_ID,DEVICE_ID),
    FOREIGN KEY(PROJECT_ID) REFERENCES PROJECT(PROJECT_ID),
    FOREIGN KEY(DEVICE_ID) REFERENCES DEVICE(DEVICE_ID)
);

INSERT INTO USER
VALUES(1,"PAVLOS","KAPOIOW",NULL);
INSERT INTO USER
VALUES(2,"Giorgos","aaa1",NULL);
INSERT INTO USER
VALUES(3,"Bill","aaa1",NULL);
INSERT INTO PROJECT
VALUES(1,"Energy Meter v1",2);
INSERT INTO PROJECT
VALUES(2,"Energy Meter v2",2);
INSERT INTO ROOM
VALUES("BATHROOM",15,10);
INSERT INTO DEVICE
VALUES(1,"ESP32","1999-12-01","BATHROOM");
INSERT INTO VARIABLES
VALUES(1,220,"2000-12-01",1);
INSERT INTO VARIABLES
VALUES(1,210,"2000-12-01",1);
INSERT INTO VARIABLES
VALUES(1,219,"2000-12-01",1);
INSERT INTO VARIABLES
VALUES(1,221,"2000-12-01",1);
INSERT INTO VARIABLES
VALUES(1,222,"2000-12-01",1);
INSERT INTO REACTS_WITH
VALUES(3,1,"2001-01-01");
INSERT INTO REACTS_WITH
VALUES(2,1,"2001-01-01");
INSERT INTO BELONGS
VALUES(1,1);
INSERT INTO BELONGS
VALUES(2,1);
